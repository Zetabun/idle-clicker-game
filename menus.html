<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Alien Evolution - Menus</title>
    <link rel="stylesheet" href="menus.css">
</head>
<body>
    <div class="container">
        <header class="header">
            <span id="back-to-game" class="back-icon">&#x2190;</span>
            <h1>Alien Evolution</h1>
        </header>
        <main class="game-container">
            <!-- Cells Section -->
            <div class="resource-display">
                <h2>Cells</h2>
                <div class="resource" id="resource1">
                    <span class="resource-name">Cells:</span>
                    <span class="resource-value" id="cell-count">0</span>
                </div>
                <!-- CPS Section -->
                <div class="resource" id="cps-display">
                    <span class="resource-name">CPS:</span>
                    <span class="resource-value" id="cps-value">0</span>
                </div>
            </div>
            <!-- Buttons Section -->
            <div class="actions">
                <button class="action-button" onclick="location.href='lore.html'">Lore</button>
                <button class="action-button" onclick="location.href='singleCell.html'">Cell Farm</button> 
                <button class="action-button">Button 3</button>
                <button class="action-button">Button 4</button>
                <button class="action-button">Button 5</button>
                <button class="action-button">Button 6</button>
                <button class="action-button">Button 7</button>
                <button class="action-button">Button 8</button>
                <button class="action-button">Button 9</button>
            </div>
        </main>
        <footer class="footer">
            <p>HTML 5 â€” Adam Bullas 2024</p>
        </footer>
    </div>

    <script src="scripts/saveLoad.js"></script>
    <script src="scripts/game.js"></script>
    <script src="scripts/automation.js"></script>
    <script src="scripts/tissues.js"></script>
    <script src="scripts/organs.js"></script>
	<script src="scripts/organSystems.js"></script>
    <script>
        // Handle back to game navigation
        document.getElementById('back-to-game').addEventListener('click', function() {
            window.location.href = 'index.html';
        });

        // Load the game state and ensure cells and CPS are updated
        window.addEventListener('load', function() {
            loadGameState(); // Load the game state

            // Ensure all relevant values are loaded and calculated before updating the UI
            const updateUI = () => {
                document.getElementById('cell-count').textContent = cells || 0;
                document.getElementById('cps-value').textContent = calculateCPS() || 0;
            };

            // Update the UI after the game state is fully loaded
            setTimeout(updateUI, 100); // Increased delay to ensure all game data is loaded

            // Start relevant automation processes if applicable
            if (cellReproductionUnits > 0) {
                startAutomation();
            }
            if (tissueReproductionUnits > 0 && tissuesUnlocked) {
                startTissueAutomation();
            }
            if (organReproductionUnits > 0 && organsUnlocked) {
                startOrganAutomation();
            }
        });
    </script>
</body>
</html>
